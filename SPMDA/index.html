<!DOCTYPE html>
<html>
<head>
    <title>SPMDA Backend Test</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .container { max-width: 400px; margin: 0 auto; }
        input { display: block; width: 100%; margin-bottom: 10px; padding: 8px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        #message { margin-top: 20px; padding: 10px; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Register</h2>
        <input type="text" id="reg-username" placeholder="Username">
        <input type="password" id="reg-password" placeholder="Password">
        <button onclick="register()">Register</button>
        
        <h2>Login</h2>
        <input type="text" id="login-username" placeholder="Username">
        <input type="password" id="login-password" placeholder="Password">
        <button onclick="login()">Login</button>
        
        <div id="message"></div>
    </div>

    <script>
        async function register() {
            const username = document.getElementById('reg-username').value;
            const password = document.getElementById('reg-password').value;
            
            try {
                const response = await fetch('register.php', {
                    method: 'POST',
                    body: JSON.stringify({ username, password })
                });
                const data = await response.json();
                showMessage(data.message, data.status === 'success' ? 'green' : 'red');
            } catch (error) {
                showMessage('Error: ' + error, 'red');
            }
        }

        async function login() {
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            
            try {
                const response = await fetch('login.php', {
                    method: 'POST',
                    body: JSON.stringify({ username, password })
                });
                const data = await response.json();
                showMessage(data.message, data.status === 'success' ? 'green' : 'red');
            } catch (error) {
                showMessage('Error: ' + error, 'red');
            }
        }

        function showMessage(msg, color) {
            const el = document.getElementById('message');
            el.textContent = msg;
            el.style.backgroundColor = color === 'green' ? '#d4edda' : '#f8d7da';
            el.style.color = color === 'green' ? '#155724' : '#721c24';
        }
    </script>
</body>
</html>
